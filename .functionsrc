function q() {
	qlmanage -p "$@" >/dev/null 2>&1
}

function search() {
	if [ $1 = "-f" ]
	then
		find . -name "*$2*" | ack --passthru "$2"
	else
		find . -name "*$1*" | ack --passthru "$1"
		ack "$1" **
	fi
}

function mssh() {
	for HOST in $(cat $2)
	do 
		ssh -o StrictHostKeyChecking=no "$1@$HOST" "$3" >"output.$HOST" 2>"output.$HOST.err" &
	done
	wait
}

function msshp() {
	read -s "PASS?Password: "

	for HOST in $(cat $2)
	do 
		sshpass -p "$PASS" ssh -o StrictHostKeyChecking=no "$1@$HOST" "$3" >"output.$HOST" 2>"output.$HOST.err" &
	done
	wait
}

function crup() {
	brew cask reinstall $(brew cask outdated) || true
	brew cask cleanup
}

function scuttle() {
	docker kill $(docker ps -a -q) || true
	docker rm $(docker ps -a -q) || true
}

function sink() {
	docker rmi $(docker images -q) || true
}

function gitt() {
	if [ -z "$1" ]
	then
		echo "No commit message supplied"
	else
		BRANCH="$(git rev-parse --abbrev-ref HEAD | awk 'match($0, /[A-Z]+-[[:digit:]]+/) { print substr($0, RSTART, RLENGTH) }')"

		git add -A

		if [ -z "$BRANCH" ]
		then
			git commit -m $1
		else
			git commit -m "$BRANCH $1"
		fi

		git push
	fi
}

function gi() {
	if [ -z "$1" ]
	then
		curl -L -s https://www.gitignore.io/api/linux,macos,windows | sed '1d'
	else
		if [ "$1" == "list" ]
		then
			if [ -z "$2" ]
			then
				curl -L -s https://www.gitignore.io/api/list?format=lines
			else
				curl -L -s https://www.gitignore.io/api/list?format=lines | ack $2
			fi
		else
			curl -L -s https://www.gitignore.io/api/"$1" | sed '1d'
		fi
	fi
}

function includes() {
	while read LINE
	do
		if ! grep -qr "\b$LINE\b" "$2"
		then
			echo $LINE # The line was not found
		fi
	done <$1
}

function cells() {
	if [ -z $1 ]
	then
		echo "No iteration count supplied"
	else
		for i in {1..$1}
		do
			WIDTH=960
			HEIGHT=600

			if [ -z $2 ]
			then
				gautomata -w $WIDTH -h $HEIGHT -b -a random
			else
				gautomata -w $WIDTH -h $HEIGHT -b -a $2
			fi
		done

		echo "Scaling images"
		mogrify -scale 5760x3600+0+0 *.png
	fi
}
